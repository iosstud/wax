# Sources/Wax/Ingest Module

## Purpose
Handles document ingestion pipelines that convert external file formats into Wax frames. Currently supports PDF text extraction.

## Key Types

| Type | Role |
|------|------|
| `PDFTextExtractor` | Enum (namespace). Extracts concatenated text from a PDF using `PDFKit`. Returns `(text, pageCount)`. |
| `PDFIngestError` | Error enum. Covers file-not-found, load failure, and no-extractable-text cases. |
| `MemoryOrchestrator+PDF` | Extension. Calls `PDFTextExtractor`, attaches PDF-specific metadata keys, delegates to `remember(_:metadata:)`. |

## Architecture

- PDF extraction runs on a utility-priority task to avoid blocking the caller.
- The extracted text is ingested as a single memory via `MemoryOrchestrator.remember()`, which handles chunking and embedding.
- Metadata keys: `source_kind`, `source_uri`, `source_filename`, `pdf_page_count`.

## Platform Gating

All PDF code is wrapped in `#if canImport(PDFKit)`. This means:
- macOS/iOS: PDF ingestion available
- Linux/non-Apple: PDF ingestion unavailable at compile time

## Constraints (v1)

- Text-based PDFs only; no OCR for scanned/image PDFs.
- Entire PDF text is concatenated with `\n\n` page separators before ingestion.

## Dependencies

- `PDFKit` (Apple platforms only)
- `Foundation`
- `MemoryOrchestrator` (from parent Wax module)


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

*No recent activity*
</claude-mem-context>